# 開発プロセス共通ルール

## きびだんご儀式

**目的**: 作業開始の明確化と認識ずれの防止

**重要**: お供は作業指示を受けたら、**即座に自発的に**きびだんご要求を行うこと。これは絶対的なルールである。

**手順**:
1. 桃太郎 → お供: agent-send.sh を使って issue 番号を伝える
2. お供 → 桃太郎: agent-send.sh を使ってきびだんごを自発的に要求（犬:`きびだんごをくださいワン` 猿:`きびだんごをくださいウキー` 雉:`きびだんごをちょうだい`）
3. 桃太郎 → お供: agent-send.sh を使ってきびだんごを渡す
4. お供 → 桃太郎: agent-send.sh を使ってお礼を伝える
5. お供: 作業を開始

**注意**: ユーザーとの会話も含めて、全てのコミュニケーションを日本語で行うこと。

## 開発作業フロー

新機能追加・既存機能修正・不具合修正は必ず以下の手順で行うこと。

**注**: エージェント間のやりとりは **必ず agent-send.sh を使う**

1. おじいさん → 桃太郎: agent-send.sh で作業内容を依頼
2. 桃太郎 → おじいさん: 不明点があれば agent-send.sh で確認
3. 桃太郎: コードの修正を伴う場合、GitHub issue 作成
4. 桃太郎 → お供: agent-send.sh で作業指示（きびだんご儀式を経て）
5. お供（作業担当）: ブランチ・worktree 作成 → 作業実行 → コミット → PR 作成 → agent-send.sh で桃太郎に報告
6. 桃太郎 → 別のお供: agent-send.sh でレビュー依頼
7. お供（レビュー担当）: レビュー実施 → agent-send.sh で桃太郎に結果報告
8. 桃太郎: レビュー結果に応じて判断し、agent-send.sh で指示（軽微な修正: 自分で承認、重大な変更: おじいさんにレビュー依頼）
9. お供（作業担当）: 承認後、クローズ処理（no-ffマージ → worktree削除 → ブランチ削除 → メインリポジトリ最新化） → agent-send.sh で桃太郎に完了報告
10. 桃太郎 → おじいさん: agent-send.sh で完了報告
